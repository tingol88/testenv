<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–õ—É–Ω–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å</title>
  <style>
    body { font-family: sans-serif; }
    .moon-block { margin-top: 20px; padding: 15px; background: #f7f7fa; border-radius: 10px; max-width: 400px;}
    label { font-weight: bold;}
  </style>
</head>
<body>
  <h1>üåô –õ—É–Ω–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å</h1>
  <label for="datepick">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É:</label>
  <input type="date" id="datepick" />
  <button onclick="getMoon()">–ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–≥–Ω–æ–∑</button>

  <div id="mooninfo" class="moon-block" style="display:none;">
    <h3 id="moon-phase"></h3>
    <p id="moon-description"></p>
    <small id="moon-date"></small>
  </div>

  <script>
    function formatDateISO(date) {
      return date.toISOString().slice(0,10);
    }

    document.addEventListener('DOMContentLoaded', function() {
      // –£—Å—Ç–∞–Ω–æ–≤–∏–º –¥–∞—Ç—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é - —Å–µ–≥–æ–¥–Ω—è
      const today = new Date();
      document.getElementById('datepick').value = formatDateISO(today);
    });

    async function getMoon() {
      const date = document.getElementById('datepick').value;
      const res = await fetch('/api/moon?date=' + date);
      const data = await res.json();
      document.getElementById('moon-phase').textContent = "–§–∞–∑–∞: " + data.phase;
      document.getElementById('moon-description').textContent = data.description;
      document.getElementById('moon-date').textContent = "–î–∞—Ç–∞: " + data.date;
      document.getElementById('mooninfo').style.display = "block";
    }
  </script>
</body>
</html>
